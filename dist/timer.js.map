{"version":3,"sources":["src/timer.js"],"names":[],"mappings":"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","file":"src/timer.js","sourcesContent":["define([\"dist/mini_daemon\", \"jquery\"], function(MiniDaemon, $){\n    function Timer(divId, limit, callback){\n      if (!(this && this instanceof Timer)) { throw \"Did not instantiate timer object\"; }\n      this.divId = divId;\n      this.div = $(divId);\n      this.rate = 100;\n      this.time = 0;\n      this.limit = limit;\n      this.limitCallback = callback;\n      this.daemon = null;\n    }\n\n    Timer.prototype.writeTime = function(timeInMilli){\n        var seconds,\n            minutes,\n            header;\n        \n        if(this.limit){\n            header = \"Time left: \"\n            timeInMilli = this.limit - timeInMilli;\n        } else { \n            header = \"Time taken: \"\n        }\n        seconds = Math.floor((timeInMilli/1000) % 60);\n        minutes = Math.floor((timeInMilli/60000) % 60);\n        this.div.html(header + this.formatTime(minutes) + \":\" + this.formatTime(seconds));\n    };\n\n    Timer.prototype.callback = function(index, length, backwards){\n        var timeInMilli = index * this.rate;\n        this.time = timeInMilli;\n        this.writeTime(timeInMilli);\n        if(this.limit && this.limitCallback){\n            if(this.time > this.limit){\n                this.kill();\n            }\n        }\n    };\n\n    Timer.prototype.kill = function(){\n        this.limitCallback();\n        this.stop();\n    };\n\n    Timer.prototype.restart = function(){\n        this.stop();\n        this.start();\n    };\n\n    Timer.prototype.formatTime = function(val){\n        if(val < 10){\n            return \"0\" + val;\n        }\n        return \"\" + val;\n    };\n\n    Timer.prototype.start = function(){\n        if(!this.daemon){\n            this.daemon = new MiniDaemon(this, this.callback, this.rate);\n            this.time = 0;\n        }\n        this.daemon.start();\n        window.timer = this;\n    };\n\n    Timer.prototype.pause = function(){\n        if(this.daemon){\n            this.daemon.pause();\n            return true;\n        } else {\n            return false;\n        }\n    };\n\n    Timer.prototype.stop = function(){\n        window.timer = null;\n        if(this.daemon){\n            this.daemon.pause();\n            this.daemon = null;\n            return true;\n        } else {\n            return false;\n        }\n    };\n    return Timer;\n});\n"]}