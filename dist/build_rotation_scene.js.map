{"version":3,"sources":["src/build_rotation_scene.js"],"names":[],"mappings":"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","file":"src/build_rotation_scene.js","sourcesContent":["define([\"three\", \"dist/build_scene\", \"dist/model_rotation_controller\"], function(THREE, SceneBuilder, ModelController){\n    return function(){\n        return {\n            materialsCallback: function(materials){return materials;},\n            setId: function(id){this.loopId = id; return this;},\n            setModelUrl: function(modelUrl){this.modelUrl = modelUrl; return this;},\n            setInputBus: function(inputBus){this.inputBus = inputBus; return this;},\n            setRotationBuilder: function(rotationBuilder){this.rotationBuilder = rotationBuilder; return this;},\n            setView: function(view){this.view = view; return this;},\n            setRenderLoop: function(renderLoop){this.renderLoop = renderLoop; return this;},\n            fields: function(){\n                return {\n                    \"loopId\":this.loopId,\n                    \"modelUrl\":this.modelUrl,\n                    \"inputBus\":this.inputBus,\n                    \"rotationBuilder \":this.rotationBuilder,\n                    \"view\":this.view,\n                    \"renderLoop\":this.renderLoop,\n                };\n            },\n            build: function(callback){\n                var fields = this.fields();\n                for(var key in fields){\n                    if(fields.hasOwnProperty(key)){\n                        var value = fields[key];\n                        if(value === undefined){\n                            window.log.error(\"Not all fields defined in Build Rotation Scene\", this.fields());\n                            throw new Error(\"Not all fields defined.\");\n                        }\n                    }\n                }\n\n                var that = this;\n                var loader = new THREE.JSONLoader();\n                loader.load(this.modelUrl, function(geometry, materials) {\n                    window.log.debug(materials);\n                    var material = new THREE.MeshFaceMaterial(that.materialsCallback(materials)),\n                        model = new THREE.Mesh(geometry, material),\n                        controller = ModelController.new(that.loopId, model, that.inputBus, that.rotationBuilder),\n                        sceneBuilder = SceneBuilder.new();\n                    sceneBuilder.init(that.view, controller);\n                    that.renderLoop.addView(that.loopId, sceneBuilder);\n                    if(callback){\n                        callback(controller);\n                    }\n                });\n            },\n        };\n    };\n});\n"]}