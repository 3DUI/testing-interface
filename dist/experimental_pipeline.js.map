{"version":3,"sources":["src/experimental_pipeline.js"],"names":[],"mappings":"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","file":"src/experimental_pipeline.js","sourcesContent":["define([\"dist/capture_participant_details\", \"dist/pipeline\",\"dist/rotating_models\",\"dist/experiment_task\", \"dist/render_manual\", \"dist/final_screen\", \"dist/mrt_1\", \"dist/mrt_2\", \"dist/mrt_test\", \"dist/sus\", \"dist/reset_page\", \"dist/experiment_design\", \"dist/local_object\", \"dist/time_out\"], function(CaptureParticipantDetails, Pipeline, RotatingModels, ExperimentalTask, RenderManual, FinalScreen, MRT1, MRT2, MRTTest, SUS, ResetPage, ExperimentDesign, LocalObject, TimeOut){\n\n    var TRAINING_LIMIT = 3 * 60 * 1000;\n\n    function ExperimentalPipeline(){\n        this.pipeline = new Pipeline(\"pipeline\", FinalScreen, ResetPage, false);\n        this.pipeline.add(CaptureParticipantDetails);\n        this.addManual(\"documentation/experiment.md\");\n        this.pipeline.add(MRT1);\n        this.pipeline.add(MRT2);\n        this.addManual(\"documentation/mrt_instructions.md\");\n        this.pipeline.add(MRTTest);\n        this.pipeline.add(TimeOut);\n        this.addManual(\"documentation/tasks.md\");\n        this.addManual(\"documentation/controllers.md\");\n        for(var i = 0; i < 3; i++){\n            this.addControllerManual(i);\n            this.addExperiment(i, \n                {title: \"Training\",\n                 taskUrl:\"tasks/training_tasks.json\",\n                 limit: TRAINING_LIMIT});\n            this.pipeline.add(TimeOut);\n            this.addTasks(i,\n                {title: \"Evaluation\",\n                 taskUrl:\"tasks/mixed_tasks.json\",\n                 limit: undefined});\n           this.addSUS(i);\n        }\n    }\n\n    ExperimentalPipeline.prototype.start = function(){\n        this.pipeline.start();\n    }\n\n    ExperimentalPipeline.prototype.currentExperiment = function(){\n        var partipantNumber = new LocalObject(\"participant_number\"),\n            num = partipantNumber.get(\"val\");\n        if(num === undefined){\n            return num;\n        }\n        return ExperimentDesign(num);\n    }\n\n    ExperimentalPipeline.prototype.addExperiment = function(index, experimentConfig){\n        var that = this;\n        (function(experimentIndex, config){\n            that.pipeline.add(function(callback){\n                var experiment = that.currentExperiment(),\n                    controllers = experiment.controllers,\n                    models = experiment.models;\n                RotatingModels(callback,{\n                    title: config.title, \n                    taskUrl: config.taskUrl,\n                    orientationModelUrl: models[experimentIndex],\n                    inspectionModelUrl: \"models/ico_sphere_model.json\",\n                    controllerKey: controllers[experimentIndex],\n                    limit: config.limit})});\n        })(index, experimentConfig);\n    }\n\n    ExperimentalPipeline.prototype.addTasks = function(index, experimentConfig){\n        var that = this;\n        (function(experimentIndex, config){\n            that.pipeline.add(function(callback){\n                var experiment = that.currentExperiment(),\n                    controllers = experiment.controllers,\n                    models = experiment.models;\n                ExperimentalTask(that.currentExperiment().controllers[index],{\n                    title: config.title, \n                    taskUrl: config.taskUrl,\n                    orientationModelUrl: models[experimentIndex],\n                    inspectionModelUrl: \"models/ico_sphere_model.json\",\n                    controllerKey: controllers[experimentIndex],\n                    limit: config.limit},\n                    callback)\n                });\n        })(index, experimentConfig);\n    }\n\n    ExperimentalPipeline.prototype.addControllerManual = function(i){\n        var that = this;\n        var manual = {\n            discrete: \"documentation/discrete.md\",\n            twoaxis: \"documentation/two_axis.md\",\n            arcball: \"documentation/arcball.md\"\n        };\n        (function(index){\n            that.pipeline.add(function(callback){\n                var controllerName = that.currentExperiment().controllers[index],\n                    manualUrl = manual[controllerName];\n                $.get(manualUrl, function( data ) {\n                   RenderManual(data, callback); \n                });\n            });\n        })(i);\n    }\n\n    ExperimentalPipeline.prototype.addManual = function(manualUrl){\n        this.pipeline.add(function(callback){\n            $.get(manualUrl, function(data){\n                RenderManual(data, callback);\n            });\n        });\n    }\n\n    ExperimentalPipeline.prototype.addSUS = function(i){\n        var that = this;\n        (function(index){\n            that.pipeline.add(function(callback){\n                var controllerName = that.currentExperiment().controllers[index];\n                SUS(controllerName, callback);\n            });\n        })(i);\n    }\n    console.log(ExperimentalPipeline);\n\n    return ExperimentalPipeline;\n});\n"]}