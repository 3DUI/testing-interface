{"version":3,"sources":["src/mouse_input_bus.js"],"names":[],"mappings":"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","file":"src/mouse_input_bus.js","sourcesContent":["define([\"jquery\"], function($){\n    return function(domElement){\n        var ELM = $(\"body\");\n        var MouseInputBus = {\n            consumersForAction: {\"all\":{}, \"move\":{}, \"down\":{}, \"up\":{}, \"mousewheel\":{}},\n            verbose: false,\n            publishActionFn: function(name){\n                var that = this;\n                return function(event){\n                    var context = this;\n                    return that.publishAction(name, event, context);\n                };\n            },\n            publishAction: function(name, event, context){\n                var consumers = this.getConsumers(name);\n                if(this.verbose){\n                    window.log.debug(\"Fired event\", event, \"with name\", name, \"and context\" + context);\n                }\n\n                event.actualX = event.pageX - $(domElement).offset().left;\n                event.actualY = event.pageY - $(domElement).offset().top;\n\n                for(var i = 0; i < consumers.length; i++){\n                    consumers[i](name, event);\n                }\n            },\n            getConsumers: function(name){\n                var consumers = [];\n                var keys = [name, \"all\"];\n                for(var i = 0; i < keys.length; i++){\n                    var consumersObject = this.consumersForAction[keys[i]];\n                    for(var key in consumersObject){\n                        if(consumersObject.hasOwnProperty(key)){\n                            consumers.push(consumersObject[key]);\n                        }\n                    }\n                }\n                return consumers;\n            },\n            registerConsumer: function(name, key, consumer){\n                this.consumersForAction[name][key] = consumer;\n            },\n            deregisterConsumer: function(name, key){\n                if(key in this.consumersForAction[name]){\n                    delete this.consumersForAction[name][key];\n                    return true;\n                }\n                return false;\n            },\n            deregisterAllConsumers: function(){\n                for(var name in this.consumersForAction){\n                    if(this.consumersForAction.hasOwnProperty(name)){\n                        var consumerGroup = this.consumersForAction[name];\n                        for(var key in consumerGroup){\n                            if(consumerGroup.hasOwnProperty(key)){\n                                this.deregisterConsumer(name, key)\n                            }\n                        }\n                    }\n                }\n            },\n            removeMouseEvents: function(){\n                ELM.off('mousemove');\n                ELM.off('mousedown');\n                ELM.off('mouseup');\n            },\n            teardown: function(){\n                this.deregisterAllConsumers();\n                this.removeMouseEvents();\n            },\n        };\n\n        ELM.mousemove(MouseInputBus.publishActionFn(\"move\"));\n        ELM.mousedown(MouseInputBus.publishActionFn(\"down\"));\n        ELM.mouseup(MouseInputBus.publishActionFn(\"up\"));\n        \n        return MouseInputBus;\n    };\n});\n"]}