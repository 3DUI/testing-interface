{"version":3,"sources":["src/mini_daemon.js"],"names":[],"mappings":"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","file":"src/mini_daemon.js","sourcesContent":["/*\\\n|*|  AMD packaged version of\n|*|  :: MiniDaemon ::\n|*|\n|*|  Revision #2 - September 26, 2014\n|*|\n|*|  https://developer.mozilla.org/en-US/docs/Web/API/window.setInterval\n|*|  https://developer.mozilla.org/User:fusionchess\n|*|\n|*|  This framework is released under the GNU Lesser General Public License, version 3 or later.\n|*|  http://www.gnu.org/licenses/lgpl-3.0.html\n|*|\n\\*/\ndefine(function(){ \n    function MiniDaemon (oOwner, fTask, nRate, nLen) {\n      if (!(this && this instanceof MiniDaemon)) { return; }\n      if (arguments.length < 2) { throw new TypeError(\"MiniDaemon - not enough arguments\"); }\n      if (oOwner) { this.owner = oOwner; }\n      this.task = fTask;\n      if (isFinite(nRate) && nRate > 0) { this.rate = Math.floor(nRate); }\n      if (nLen > 0) { this.length = Math.floor(nLen); }\n    }\n     \n    MiniDaemon.prototype.owner = null;\n    MiniDaemon.prototype.task = null;\n    MiniDaemon.prototype.rate = 100;\n    MiniDaemon.prototype.length = Infinity;\n     \n      /* These properties should be read-only */\n     \n    MiniDaemon.prototype.SESSION = -1;\n    MiniDaemon.prototype.INDEX = 0;\n    MiniDaemon.prototype.PAUSED = true;\n    MiniDaemon.prototype.BACKW = true;\n     \n      /* Global methods */\n     \n    MiniDaemon.forceCall = function (oDmn) {\n      oDmn.INDEX += oDmn.BACKW ? -1 : 1;\n      if (oDmn.task.call(oDmn.owner, oDmn.INDEX, oDmn.length, oDmn.BACKW) === false || oDmn.isAtEnd()) { oDmn.pause(); return false; }\n      return true;\n    };\n     \n      /* Instances methods */\n     \n    MiniDaemon.prototype.isAtEnd = function () {\n      return this.BACKW ? isFinite(this.length) && this.INDEX < 1 : this.INDEX + 1 > this.length;\n    };\n     \n    MiniDaemon.prototype.synchronize = function () {\n      if (this.PAUSED) { return; }\n      clearInterval(this.SESSION);\n      this.SESSION = setInterval(MiniDaemon.forceCall, this.rate, this);\n    };\n     \n    MiniDaemon.prototype.pause = function () {\n      clearInterval(this.SESSION);\n      this.PAUSED = true;\n    };\n     \n    MiniDaemon.prototype.start = function (bReverse) {\n      var bBackw = Boolean(bReverse);\n      if (this.BACKW === bBackw && (this.isAtEnd() || !this.PAUSED)) { return; }\n      this.BACKW = bBackw;\n      this.PAUSED = false;\n      this.synchronize();\n    };\n    return MiniDaemon;\n});\n"]}